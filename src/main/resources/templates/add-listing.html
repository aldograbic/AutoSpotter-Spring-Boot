<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <th:block th:insert="~{fragments/head :: head}"></th:block>
    <script th:src="@{/js/addListing.js}" defer="defer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.7.0/datepicker.min.js"></script>
    <title>AutoSpotter | Postavi oglas</title>
</head>

<body class="flex flex-col min-h-screen">

    <th:block th:insert="~{fragments/header :: header}"></th:block>

    <div th:if="${errorMessage}" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 10000)"
        class="absolute top-0 flex items-center w-full z-10 p-4 mb-4 text-sm text-red-800 border border-red-300 rounded-lg bg-red-50 mt-[4.8rem] dark:bg-gray-800 dark:text-red-400 dark:border-red-800"
        role="alert">
        <svg class="flex-shrink-0 inline w-4 h-4 mr-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
            fill="currentColor" viewBox="0 0 20 20">
            <path
                d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z" />
        </svg>
        <span class="sr-only">Pogreška</span>
        <div>
            <span class="font-medium" th:text="${errorMessage}"></span>
        </div>
    </div>

    <main class="flex flex-1 space-x-4 dark:bg-gray-600">

        <th:block th:insert="~{fragments/sideDiv :: sideDiv}"></th:block>

        <div class="flex flex-col flex-1 w-50">

            <h1 class="text-3xl font-bold text-gray-700 mb-8 mt-8">Postavi oglas</h1>

            <div th:if="${step eq 1}"
                class="h-full mb-4 flex flex-col items-center border rounded-md dark:border-gray-700">
                <th:block th:insert="~{fragments/progress-bar :: progress-bar}"></th:block>
                <h2 class="text-xl font-bold text-gray-700 mb-8">Vrsta vozila</h2>
                <form th:action="@{/oglas-1}" method="post">
                    <div class="flex flex-col mb-4">
                        <label for="vehicleType">Prodajem</label>
                        <div class="relative inline-block w-96">
                            <select id="vehicleType" name="vehicleType" class="input w-full pr-8 select2-basic">
                                <option th:each="type : ${vehicleTypes}" th:value="${type}" th:text="${type}"
                                    th:selected="${type eq session['vehicleType']}"></option>
                            </select>
                        </div>
                    </div>

                    <div class="flex flex-col mb-4">
                        <input type="submit" value="Dalje" class="button">
                    </div>
                </form>
            </div>

            <div th:if="${step eq 2}"
                class="h-full mb-4 flex flex-col items-center border rounded-md dark:border-gray-700">
                <th:block th:insert="~{fragments/progress-bar :: progress-bar}"></th:block>
                <h2 class="text-xl font-bold text-gray-700 mb-8">Vozilo - osnovno</h2>
                <form th:action="@{/oglas-2}" method="post">
                    <div class="flex flex-col mb-4">
                        <label for="manufacturer">Proizvođač</label>
                        <div class="relative inline-block w-96">
                            <select id="manufacturer" name="manufacturer" required
                                class="input w-96 select2-withSearch">
                                <option value="" disabled selected>Odabir</option>
                                <option th:each="manufacturer : ${manufacturers}" th:value="${manufacturer}"
                                    th:text="${manufacturer}" th:selected="${manufacturer eq session['manufacturer']}">
                                </option>
                            </select>
                        </div>

                    </div>

                    <div class="flex flex-col">
                        <label for="model">Model</label>
                        <div class="relative inline-block w-96">
                            <select id="model" name="model" required class="input w-96 select2-withSearch">
                                <option value="" disabled selected>Odabir</option>
                            </select>
                        </div>

                    </div>

                    <div th:if="${showBodyTypeInput}" class="flex flex-col mt-4">
                        <label for="bodyType">Oblik karoserije</label>
                        <div class="relative inline-block w-96">
                            <select id="bodyType" name="bodyType" required class="input w-96 select2-basic">
                                <option value="" disabled selected>Odabir</option>
                                <option th:each="bodyType : ${bodyTypes}" th:value="${bodyType}" th:text="${bodyType}"
                                    th:selected="${bodyType eq session['bodyType']}"></option>
                            </select>
                        </div>

                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div th:if="${showNumberOfWheelsInput}" class="flex flex-col mb-4 mt-4">
                            <label for="numberOfWheels">Broj kotača</label>
                            <input type="number" id="numberOfWheels" name="numberOfWheels" min="4" placeholder="6"
                                required th:value="${initialNumberOfWheels}" class="input no-arrows">
                        </div>
                        <div th:unless="${showNumberOfWheelsInput}" class="flex flex-col mb-4">
                            <input type="hidden" name="numberOfWheels" th:value="${initialNumberOfWheels}">
                        </div>

                        <div th:if="${showMaximumAllowableWeightInput}" class="relative flex flex-col mb-4 mt-4">
                            <label for="maximumAllowableWeight">Najveća dopuštena masa</label>
                            <div class="flex items-center">
                                <input type="text" id="maximumAllowableWeight" name="maximumAllowableWeight"
                                    placeholder="1000" pattern="[0-9]*\.?[0-9]+" required class="input no-arrows"
                                    oninput="validateInput(this)">
                                <span class="absolute right-0 pr-2 text-gray-500 text-xl">kg</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-8">
                        <div class="flex flex-col mb-4">
                            <label for="year">Godina proizvodnje</label>
                            <div class="relative inline-block w-44">
                                <select id="year" name="year" required class="input w-44 select2-basic">
                                    <option value="" disabled selected>Odabir</option>
                                    <option th:each="year : ${years}" th:value="${year}" th:text="${year}"
                                        th:selected="${year eq session['year']}"></option>
                                </select>
                            </div>

                        </div>

                        <div class="flex flex-col mb-2">
                            <label for="registeredYes">Registriran</label>
                            <div class="flex justify-between mt-1">
                                <div class="flex items-center">
                                    <input id="registeredYes" type="radio" name="registeredRadio" value="Da"
                                        class="hidden" />
                                    <label for="registeredYes" class="flex items-center cursor-pointer">
                                        <span
                                            class="w-4 h-4 inline-block mr-1 rounded-full border border-grey"></span>Da</label>
                                </div>
                                <div class="flex items-center">
                                    <input id="registeredNo" type="radio" name="registeredRadio" value="Ne"
                                        class="hidden" />
                                    <label for="registeredNo" class="flex items-center cursor-pointer">
                                        <span
                                            class="w-4 h-4 inline-block mr-1 rounded-full border border-grey"></span>Ne</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="hidden">
                        <div class="days">
                            <div
                                class="days-of-week grid grid-cols-7 mb-1 dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm">
                            </div>
                            <div
                                class="datepicker-grid w-64 grid grid-cols-7 block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500">
                            </div>
                        </div>
                        <div class="calendar-weeks">
                            <div class="days-of-week flex"><span
                                    class="dow h-6 leading-6 text-sm font-medium text-gray-500"></span></div>
                            <div
                                class="weeks week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm">
                            </div>
                        </div>
                    </div>
                    <div id="registeredDateInput" class="flex relative flex-col mb-4 hidden">
                        <label for="registeredDate">Datum sljedeće registracije</label>
                        <div class="flex items-center">
                            <input datepicker datepicker-format="yyyy-mm-dd" datepicker-autohide readonly type="text"
                                id="registeredDate" name="registeredDate" class="input w-96 dark"
                                th:value="${session['registeredDate']}" required placeholder="Odaberite datum">
                            <span class="absolute right-0 pr-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-6" viewBox="0 0 24 24">
                                    <path
                                        d="M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 11H4V19H20V11ZM7 5H4V9H20V5H17V7H15V5H9V7H7V5Z">
                                    </path>
                                </svg>
                            </span>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-8">
                        <div class="flex flex-col mb-4">
                            <label for="color">Boja vozila</label>
                            <input type="text" id="color" name="color" placeholder="crna" required class="input w-44"
                                th:value="${session['color']}">
                        </div>

                        <div class="flex flex-col mb-4">
                            <label for="city">Lokacija vozila</label>
                            <div class="relative inline-block w-44">
                                <select id="city" name="city" required class="input w-44 select2-withSearch">
                                    <option value="" disabled selected>Odabir</option>
                                    <th:block th:each="entry : ${citiesByCounty}">
                                        <optgroup th:label="${entry.key}">
                                            <th:block th:each="city : ${entry.value}">
                                                <option th:value="${city}" th:text="${city}"
                                                    th:selected="${city eq session['city']}"></option>
                                            </th:block>
                                        </optgroup>
                                    </th:block>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-8">
                        <div class="flex flex-col mb-4">
                            <label for="mileage">Kilometraža</label>
                            <input type="number" id="mileage" name="mileage" min="0" placeholder="0" required
                                class="input no-arrows w-44" th:value="${session['mileage']}">
                        </div>

                        <div class="flex flex-col mb-4">
                            <label for="state">Stanje</label>
                            <div class="relative inline-block w-44">
                                <select id="state" name="state" required class="input w-44 select2-basic">
                                    <option value="" disabled selected>Odabir</option>
                                    <option th:each="state : ${states}" th:value="${state}" th:text="${state}"
                                        th:selected="${state eq session['state']}"></option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between mb-4">
                        <div class="mt-2">
                            <div th:if="${step > 1}">
                                <a th:href="@{/back(step=${step - 1})}" class="button ">Nazad</a>
                            </div>
                        </div>
                        <div>
                            <input type="hidden" name="vehicleTypeId" th:value="${vehicleTypeId}">
                            <input type="submit" value="Dalje" class="button">
                        </div>
                    </div>
                </form>
            </div>

            <div th:if="${step eq 3}"
                class="h-full mb-4 flex flex-col items-center border rounded-md dark:border-gray-700">
                <th:block th:insert="~{fragments/progress-bar :: progress-bar}"></th:block>
                <h2 class="text-xl font-bold text-gray-700 mb-8">Vozilo - tehničko</h2>
                <form th:action="@{/oglas-3}" method="post">

                    <div class="flex flex-col mb-4">
                        <label for="engineType">Motor</label>
                        <div class="relative inline-block w-96">
                            <select id="engineType" name="engineType" required class="input w-96 select2-basic">
                                <option value="" disabled selected>Odabir</option>
                                <option th:each="engineType : ${engineTypes}" th:value="${engineType}"
                                    th:text="${engineType}" th:selected="${engineType eq session['engineType']}">
                                </option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-8">
                        <div class="relative flex flex-col mb-4">
                            <label for="engineDisplacement">Zapremnina motora</label>
                            <div class="flex items-center">
                                <input type="text" id="engineDisplacement" name="engineDisplacement" placeholder="1.0"
                                    pattern="[0-9]*\.?[0-9]+" required class="input w-44" oninput="validateInput(this)"
                                    th:value="${session['engineDisplacement']}">
                                <span class="absolute right-0 pr-2 text-gray-500 text-xl">L</span>
                            </div>
                        </div>
                        <div class="relative flex flex-col mb-4">
                            <label for="enginePower">Snaga motora</label>
                            <div class="flex items-center">
                                <input type="number" id="enginePower" name="enginePower" min="0" placeholder="50"
                                    required class="input w-44 no-arrows" th:value="${session['enginePower']}">
                                <span class="absolute right-0 pr-2 text-gray-500 text-xl">kW</span>
                            </div>
                        </div>
                    </div>

                    <div class="relative flex flex-col mb-4">
                        <label for="fuelConsumption">Potrošnja goriva</label>
                        <div class="flex items-center">
                            <input type="text" id="fuelConsumption" name="fuelConsumption" placeholder="1.0"
                                pattern="[0-9]*\.?[0-9]+" required class="input w-96" oninput="validateInput(this)"
                                th:value="${session['fuelConsumption']}">
                            <span class="absolute right-0 pr-2 text-gray-500 text-xl">L/100km</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-8">
                        <div class="flex flex-col mb-4">
                            <label for="transmission">Mjenjač</label>
                            <div class="relative inline-block w-44">
                                <select id="transmission" name="transmission" required class="input w-44 select2-basic">
                                    <option value="" disabled selected>Odabir</option>
                                    <option th:each="transmissionType : ${transmissionTypes}"
                                        th:value="${transmissionType}" th:text="${transmissionType}"
                                        th:selected="${transmissionType eq session['transmission']}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="flex flex-col mb-4">
                            <label for="driveTrain">Pogon kotača</label>
                            <div class="relative inline-block w-44">
                                <select id="driveTrain" name="driveTrain" required class="input w-44 select2-basic">
                                    <option value="" disabled selected>Odabir</option>
                                    <option th:each="driveTrainType : ${driveTrainTypes}" th:value="${driveTrainType}"
                                        th:text="${driveTrainType}"
                                        th:selected="${driveTrainType eq session['driveTrain']}"></option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between mb-4">
                        <div class="mt-2">
                            <div th:if="${step > 1}">
                                <a th:href="@{/back(step=${step - 1})}" class="button ">Nazad</a>
                            </div>
                        </div>
                        <div>
                            <input type="submit" value="Dalje" class="button">
                        </div>
                    </div>
                </form>

            </div>

            <div th:if="${step eq 4}"
                class="h-full mb-4 flex flex-col items-center border rounded-md dark:border-gray-700">
                <th:block th:insert="~{fragments/progress-bar :: progress-bar}"></th:block>
                <h2 class="text-xl font-bold text-gray-700 mb-8">Vozilo - detaljno</h2>
                <form th:action="@{/oglas-4}" method="post">
                    <div class="flex flex-wrap gap-4">
                        <div class="w-96">
                            <div class="flex justify-between">
                                <div
                                    th:if="${engineType eq 'Električni' or engineType eq 'Hibrid' or engineType eq 'Plug-in hibrid'}">
                                    <div class="relative flex flex-col mb-4">
                                        <label for="batteryCapacity">Kapacitet baterije</label>
                                        <div class="flex items-center">
                                            <input type="text" id="batteryCapacity" name="batteryCapacity" required
                                                pattern="[0-9]*\.?[0-9]+" class="input w-28" placeholder="50"
                                                oninput="validateInput(this)" th:value="${session['batteryCapacity']}">
                                            <span class="absolute right-0 pr-5 text-gray-500 text-xl">kWh</span>
                                        </div>
                                    </div>
                                </div>

                                <div
                                    th:if="${engineType eq 'Električni' or engineType eq 'Hibrid' or engineType eq 'Plug-in hibrid'}">
                                    <div class="relative flex flex-col mb-4">
                                        <label for="vehicleRange">Doseg vozila</label>
                                        <div class="flex items-center">
                                            <input type="text" id="vehicleRange" name="vehicleRange" required
                                                pattern="[0-9]*\.?[0-9]+" class="input w-28" placeholder="100"
                                                oninput="validateInput(this)" th:value="${session['vehicleRange']}">
                                            <span class="absolute right-0 pr-2 text-gray-500 text-xl">km</span>
                                        </div>
                                    </div>
                                </div>

                                <div
                                    th:if="${engineType eq 'Električni' or engineType eq 'Hibrid' or engineType eq 'Plug-in hibrid'}">
                                    <div class="relative flex flex-col mb-4">
                                        <label for="chargingTime">Vrijeme punjenja</label>
                                        <div class="flex items-center ml-2">
                                            <input type="text" id="chargingTime" name="chargingTime" required
                                                pattern="[0-9]*\.?[0-9]+" class="input w-28" placeholder="1"
                                                oninput="validateInput(this)" th:value="${session['chargingTime']}">
                                            <span class="absolute right-0 pr-2 text-gray-500 text-xl">h</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="flex flex-col flex-wrap gap-4">
                                <h3 class="text-lg font-bold text-gray-700 mb-4">Sigurnosne karakteristike</h3>

                                <div class="relative" x-data="{ open: false, selectedOptions: [] }">
                                    <div class="flex items-center w-96 justify-between border border-gray-400 rounded p-2 cursor-pointer"
                                        @click="open = !open">
                                        <span x-text="'Odabir (' + selectedOptions.length + ')'">Odabir (0)</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" :class="{ 'rotate-180': open }"
                                            fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                            class="w-4 h-4 transition-transform duration-300 ease-in-out">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                        </svg>
                                    </div>
                                    <div class="absolute w-full z-10" x-show="open"
                                        x-transition:leave="transition-opacity ease-in duration-150"
                                        x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
                                        @click.away="open = false">
                                        <div class="bg-white border border-gray-400 rounded mt-2 flex flex-wrap">

                                            <div class="w-full md:w-1/2">
                                                <input type="checkbox" id="absCheckbox" name="safetyFeatures"
                                                    value="abs" class="hidden" x-model="selectedOptions" />
                                                <label for="absCheckbox" class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('abs') }"></span>
                                                    ABS
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/2">
                                                <input type="checkbox" id="espCheckbox" name="safetyFeatures"
                                                    value="esp" class="hidden" x-model="selectedOptions" />
                                                <label for="espCheckbox" class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('esp') }"></span>
                                                    ESP
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/2">
                                                <input type="checkbox" id="centralLockingCheckbox" name="safetyFeatures"
                                                    value="central_locking" class="hidden" x-model="selectedOptions" />
                                                <label for="centralLockingCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('central_locking') }"></span>
                                                    Centr. zaključavanje
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/2">
                                                <input type="checkbox" id="frontSideAirbagCheckbox"
                                                    name="safetyFeatures" value="front_side_airbag" class="hidden"
                                                    x-model="selectedOptions" />
                                                <label for="frontSideAirbagCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('front_side_airbag') }"></span>
                                                    Prednji zračni jastuci
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/2">
                                                <input type="checkbox" id="tractionControlCheckbox"
                                                    name="safetyFeatures" value="traction_control" class="hidden"
                                                    x-model="selectedOptions" />
                                                <label for="tractionControlCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('traction_control') }"></span>
                                                    TCS
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/2">
                                                <input type="checkbox" id="rearSideAirbagCheckbox" name="safetyFeatures"
                                                    value="rear_side_airbag" class="hidden" x-model="selectedOptions" />
                                                <label for="rearSideAirbagCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('rear_side_airbag') }"></span>
                                                    Zadnji zračni jastuci
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="flex flex-col flex-wrap gap-4">
                                <h3 class="text-lg font-bold text-gray-700 mb-4 mt-8">Dodaci</h3>

                                <div class="relative" x-data="{ open: false, selectedOptions: [] }">
                                    <div class="flex items-center w-96 justify-between border border-gray-400 rounded p-2 cursor-pointer"
                                        @click="open = !open">
                                        <span x-text="'Odabir (' + selectedOptions.length + ')'">Odabir (0)</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" :class="{ 'rotate-180': open }"
                                            fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                            class="w-4 h-4 transition-transform duration-300 ease-in-out">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                        </svg>
                                    </div>

                                    <div class="left-1/2 transform -translate-x-80 mt-2 w-[64rem]" x-show="open"
                                        x-transition:leave="transition-opacity ease-in duration-150"
                                        x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
                                        @click.away="open = false">
                                        <div class="bg-white border border-gray-400 rounded mt-2 flex flex-wrap">

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="accCheckbox" name="extras"
                                                    value="adaptive_cruise_control" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="accCheckbox" class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('adaptive_cruise_control') }"></span>
                                                    Adaptivni tempomat
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="airSuspCheckbox" name="extras"
                                                    value="air_suspension" class="hidden" x-model="selectedOptions">
                                                <label for="airSuspCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('air_suspension') }"></span>
                                                    Podesivo ogibljenje
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="alarmSystemCheckbox" name="extras"
                                                    value="alarm_system" class="hidden" x-model="selectedOptions">
                                                <label for="alarmSystemCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('alarm_system') }"></span>
                                                    Alarm sustav
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="ambientLightingCheckbox" name="extras"
                                                    value="ambient_lighting" class="hidden" x-model="selectedOptions">
                                                <label for="ambientLightingCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('ambient_lighting') }"></span>
                                                    Ambijentalna svijetla
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="androidAutoCheckbox" name="extras"
                                                    value="android_auto" class="hidden" x-model="selectedOptions">
                                                <label for="androidAutoCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('android_auto') }"></span>
                                                    Android auto
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="appleCarplayCheckbox" name="extras"
                                                    value="apple_carplay" class="hidden" x-model="selectedOptions">
                                                <label for="appleCarplayCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('apple_carplay') }"></span>
                                                    Apple carplay
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="armRestCheckbox" name="extras"
                                                    value="arm_rest" class="hidden" x-model="selectedOptions">
                                                <label for="armRestCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('arm_rest') }"></span>
                                                    Naslonjač za ruku
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="automaticAirConditioningCheckbox"
                                                    name="extras" value="automatic_air_conditioning" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="automaticAirConditioningCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('automatic_air_conditioning') }"></span>
                                                    Automatska klima
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="automatic2ZoneClimatisationsCheckbox"
                                                    name="extras" value="automatic_2_zone_climatisations" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="automatic2ZoneClimatisationsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('automatic_2_zone_climatisations') }"></span>
                                                    Dvozonska klima
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="automatic3ZoneClimatisationsCheckbox"
                                                    name="extras" value="automatic_3_zone_climatisations" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="automatic3ZoneClimatisationsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('automatic_3_zone_climatisations') }"></span>
                                                    Trozonska klima
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="automatic4ZoneClimatisationsCheckbox"
                                                    name="extras" value="automatic_4_zone_climatisations" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="automatic4ZoneClimatisationsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('automatic_4_zone_climatisations') }"></span>
                                                    Četverozonska klima
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="biXenonHeadlightsCheckbox" name="extras"
                                                    value="bi_xenon_headlights" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="biXenonHeadlightsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('bi_xenon_headlights') }"></span>
                                                    Bi-Xenon svijetla
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="bluetoothCheckbox" name="extras"
                                                    value="bluetooth" class="hidden" x-model="selectedOptions">
                                                <label for="bluetoothCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('bluetooth') }"></span>
                                                    Bluetooth
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="blindSpotAssistCheckbox" name="extras"
                                                    value="blind_spot_assist" class="hidden" x-model="selectedOptions">
                                                <label for="blindSpotAssistCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('blind_spot_assist') }"></span>
                                                    Pomoć za mrtvi kut
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="cdPlayerCheckbox" name="extras"
                                                    value="cd_player" class="hidden" x-model="selectedOptions">
                                                <label for="cdPlayerCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('cd_player') }"></span>
                                                    CD player
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="cruiseControlCheckbox" name="extras"
                                                    value="cruise_control" class="hidden" x-model="selectedOptions">
                                                <label for="cruiseControlCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('cruise_control') }"></span>
                                                    Tempomat
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="dabRadioCheckbox" name="extras"
                                                    value="dab_radio" class="hidden" x-model="selectedOptions">
                                                <label for="dabRadioCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('dab_radio') }"></span>
                                                    Dab radio
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="distanceWarningSystemCheckbox" name="extras"
                                                    value="distance_warning_system" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="distanceWarningSystemCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('distance_warning_system') }"></span>
                                                    Upozorenje za udaljenost
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="electricSeatAdjustmentCheckbox" name="extras"
                                                    value="electric_seat_adjustment" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="electricSeatAdjustmentCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('electric_seat_adjustment') }"></span>
                                                    Električno podešavanje sjedala
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="electricSideMirrorCheckbox" name="extras"
                                                    value="electric_side_mirror" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="electricSideMirrorCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('electric_side_mirror') }"></span>
                                                    Električni retrovizori
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="electricWindowsCheckbox" name="extras"
                                                    value="electric_windows" class="hidden" x-model="selectedOptions">
                                                <label for="electricWindowsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('electric_windows') }"></span>
                                                    Električni podizači prozora
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="emergencyCallSystemCheckbox" name="extras"
                                                    value="emergency_call_system" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="emergencyCallSystemCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('emergency_call_system') }"></span>
                                                    Sustav hitnog poziva
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="emergencyTyreRepairKitCheckbox" name="extras"
                                                    value="emergency_tyre_repair_kit" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="emergencyTyreRepairKitCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('emergency_tyre_repair_kit') }"></span>
                                                    Pribor za hitan popravak guma
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="fogLampCheckbox" name="extras"
                                                    value="fog_lamp" class="hidden" x-model="selectedOptions">
                                                <label for="fogLampCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('fog_lamp') }"></span>
                                                    Maglenke
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="handsFreeKitCheckbox" name="extras"
                                                    value="hands_free_kit" class="hidden" x-model="selectedOptions">
                                                <label for="handsFreeKitCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('hands_free_kit') }"></span>
                                                    Handsfree
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="headUpDisplayCheckbox" name="extras"
                                                    value="head_up_display" class="hidden" x-model="selectedOptions">
                                                <label for="headUpDisplayCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('head_up_display') }"></span>
                                                    Head-Up zaslon
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="headlightWasherSystemCheckbox" name="extras"
                                                    value="headlight_washer_system" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="headlightWasherSystemCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('headlight_washer_system') }"></span>
                                                    Sustav pranja prednjih svjetala
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="heatedRearSeatsCheckbox" name="extras"
                                                    value="heated_rear_seats" class="hidden" x-model="selectedOptions">
                                                <label for="heatedRearSeatsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('heated_rear_seats') }"></span>
                                                    Grijanje zadnjih sjedala
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="heatedSeatsCheckbox" name="extras"
                                                    value="heated_seats" class="hidden" x-model="selectedOptions">
                                                <label for="heatedSeatsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('heated_seats') }"></span>
                                                    Grijanje prednjih sjedala
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="heatedSteeringWheelCheckbox" name="extras"
                                                    value="heated_steering_wheel" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="heatedSteeringWheelCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('heated_steering_wheel') }"></span>
                                                    Grijanje volana
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="hillStartAssistCheckbox" name="extras"
                                                    value="hill_start_assist" class="hidden" x-model="selectedOptions">
                                                <label for="hillStartAssistCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('hill_start_assist') }"></span>
                                                    Pomoć pri kretanju uzbrdo
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="inductionChargingForSmartphonesCheckbox"
                                                    name="extras" value="induction_charging_for_smartphones"
                                                    class="hidden" x-model="selectedOptions">
                                                <label for="inductionChargingForSmartphonesCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('induction_charging_for_smartphones') }"></span>
                                                    Punjenje za pametne telefone
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="isofixCheckbox" name="extras" value="isofix"
                                                    class="hidden" x-model="selectedOptions">
                                                <label for="isofixCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('isofix') }"></span>
                                                    Isofix
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="keylessCentralLockingCheckbox" name="extras"
                                                    value="keyless_central_locking" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="keylessCentralLockingCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('keyless_central_locking') }"></span>
                                                    Zaključavanje bez ključa
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="laneChangeAssistCheckbox" name="extras"
                                                    value="lane_change_assist" class="hidden" x-model="selectedOptions">
                                                <label for="laneChangeAssistCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('lane_change_assist') }"></span>
                                                    Pomoć pri promjeni trake
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="laserHeadlightsCheckbox" name="extras"
                                                    value="laser_headlights" class="hidden" x-model="selectedOptions">
                                                <label for="laserHeadlightsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('laser_headlights') }"></span>
                                                    Laserski farovi
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="leatherSteeringWheelCheckbox" name="extras"
                                                    value="leather_steering_wheel" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="leatherSteeringWheelCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('leather_steering_wheel') }"></span>
                                                    Kožni volan
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="ledHeadlightsCheckbox" name="extras"
                                                    value="led_headlights" class="hidden" x-model="selectedOptions">
                                                <label for="ledHeadlightsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('led_headlights') }"></span>
                                                    LED prednja svjetla
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="lumbarSupportCheckbox" name="extras"
                                                    value="lumbar_support" class="hidden" x-model="selectedOptions">
                                                <label for="lumbarSupportCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('lumbar_support') }"></span>
                                                    Lumbalni oslonac
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="manualClimatisationCheckbox" name="extras"
                                                    value="manual_climatisation" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="manualClimatisationCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('manual_climatisation') }"></span>
                                                    Ručna klima
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="massageSeatsCheckbox" name="extras"
                                                    value="massage_seats" class="hidden" x-model="selectedOptions">
                                                <label for="massageSeatsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('massage_seats') }"></span>
                                                    Masaža sjedala
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="multifunctionSteeringWheelCheckbox"
                                                    name="extras" value="multifunction_steering_wheel" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="multifunctionSteeringWheelCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('multifunction_steering_wheel') }"></span>
                                                    Multifunkcionalni volan
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="navigationSystemCheckbox" name="extras"
                                                    value="navigation_system" class="hidden" x-model="selectedOptions">
                                                <label for="navigationSystemCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('navigation_system') }"></span>
                                                    Navigacija
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="onBoardComputerCheckbox" name="extras"
                                                    value="on_board_computer" class="hidden" x-model="selectedOptions">
                                                <label for="onBoardComputerCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('on_board_computer') }"></span>
                                                    Ugrađeno računalo
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="paddleShiftersCheckbox" name="extras"
                                                    value="paddle_shifters" class="hidden" x-model="selectedOptions">
                                                <label for="paddleShiftersCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('paddle_shifters') }"></span>
                                                    Poluge mjenjača
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="panoramicRoofCheckbox" name="extras"
                                                    value="panoramic_roof" class="hidden" x-model="selectedOptions">
                                                <label for="panoramicRoofCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('panoramic_roof') }"></span>
                                                    Panoramski krov
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="parkingSensorsCheckbox" name="extras"
                                                    value="parking_sensors" class="hidden" x-model="selectedOptions">
                                                <label for="parkingSensorsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('parking_sensors') }"></span>
                                                    Parking senzori
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="powerAssistedSteeringCheckbox" name="extras"
                                                    value="power_assisted_steering" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="powerAssistedSteeringCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('power_assisted_steering') }"></span>
                                                    Servo upravljač
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="rainSensorCheckbox" name="extras"
                                                    value="rain_sensor" class="hidden" x-model="selectedOptions">
                                                <label for="rainSensorCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('rain_sensor') }"></span>
                                                    Senzor za kišu
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="roofRackCheckbox" name="extras"
                                                    value="roof_rack" class="hidden" x-model="selectedOptions">
                                                <label for="roofRackCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('roof_rack') }"></span>
                                                    Krovni nosač
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="spareTyreCheckbox" name="extras"
                                                    value="spare_tyre" class="hidden" x-model="selectedOptions">
                                                <label for="spareTyreCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('spare_tyre') }"></span>
                                                    Rezervrna guma
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="sportSeatsCheckbox" name="extras"
                                                    value="sport_seats" class="hidden" x-model="selectedOptions">
                                                <label for="sportSeatsCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('sport_seats') }"></span>
                                                    Sportska sjedala
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="startStopSystemCheckbox" name="extras"
                                                    value="start_stop_system" class="hidden" x-model="selectedOptions">
                                                <label for="startStopSystemCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('start_stop_system') }"></span>
                                                    Start-stop sustav
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="sunroofCheckbox" name="extras"
                                                    value="sunroof" class="hidden" x-model="selectedOptions">
                                                <label for="sunroofCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('sunroof') }"></span>
                                                    Šiber
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="trafficSignRecognitionCheckbox" name="extras"
                                                    value="traffic_sign_recognition" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="trafficSignRecognitionCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('traffic_sign_recognition') }"></span>
                                                    Prepoznavanje znakova
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="tyrePressureMonitoringCheckbox" name="extras"
                                                    value="tyre_pressure_monitoring" class="hidden"
                                                    x-model="selectedOptions">
                                                <label for="tyrePressureMonitoringCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('tyre_pressure_monitoring') }"></span>
                                                    Nadzor tlaka u gumama
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="usbPortCheckbox" name="extras"
                                                    value="usb_port" class="hidden" x-model="selectedOptions">
                                                <label for="usbPortCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('usb_port') }"></span>
                                                    USB priključak
                                                </label>
                                            </div>

                                            <div class="w-full md:w-1/4">
                                                <input type="checkbox" id="voiceControlCheckbox" name="extras"
                                                    value="voice_control" class="hidden" x-model="selectedOptions">
                                                <label for="voiceControlCheckbox"
                                                    class="flex items-center cursor-pointer p-2">
                                                    <span
                                                        class="w-4 h-4 inline-block mr-1 border border-gray-400 rounded"
                                                        x-bind:class="{ 'bg-gray-400': selectedOptions.includes('voice_control') }"></span>
                                                    Kontrola glasom
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between mb-4">
                        <div class="mt-8">
                            <div th:if="${step > 1}">
                                <a th:href="@{/back(step=${step - 1})}" class="button">Nazad</a>
                            </div>
                        </div>
                        <div class="mt-6">
                            <input type="submit" value="Dalje" class="button">
                        </div>
                    </div>
                </form>
            </div>

            <!-- Step 5: Vehicle Images -->
            <div th:if="${step eq 5}"
                class="h-full mb-4 flex flex-col items-center border rounded-md dark:border-gray-700">
                <th:block th:insert="~{fragments/progress-bar :: progress-bar}"></th:block>
                <h2 class="text-xl font-bold text-gray-700 mb-8">Slike vozila</h2>
                <form th:action="@{/oglas-5}" method="post" enctype="multipart/form-data">
                    <div class="flex flex-col mb-4 w-96">

                        <input type="file" id="images" name="images" accept="image/*" multiple
                            class="file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:font-semibold file:bg-gray-200 hover:file:bg-gray-300"
                            onchange="previewImages(event)">

                    </div>
                    <div class="flex justify-between mb-4">
                        <div class="mt-2">
                            <div th:if="${step > 1}">
                                <a th:href="@{/back(step=${step - 1})}" class="button ">Nazad</a>
                            </div>
                        </div>
                        <div>
                            <input type="submit" value="Dalje" class="button">
                        </div>
                    </div>
                </form>
                <div id="imagePreviews" class="mt-4 grid grid-cols-4 border"></div>
            </div>

            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const hideModalTriggers = document.querySelectorAll('[data-modal-hide]');

                    hideModalTriggers.forEach(function (trigger) {
                        const targetModalId = trigger.getAttribute('data-modal-hide');
                        const targetModal = document.getElementById(targetModalId);

                        if (targetModal) {
                            trigger.addEventListener('click', function () {
                                targetModal.classList.add('hidden');
                            });
                        }
                    });
                });

                function previewImages(event) {
                    const imagePreviewsContainer = document.getElementById("imagePreviews");

                    const files = event.target.files;
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        const reader = new FileReader();

                        reader.onload = function (e) {
                            const imgContainer = document.createElement("div");
                            imgContainer.classList.add("image-container");

                            const img = document.createElement("img");
                            img.src = e.target.result;
                            img.classList.add("w-48", "h-48", "object-cover", "rounded-md", "space-x-4");

                            img.addEventListener("click", function () {
                                openEnlargedImg(e.target.result);
                            });

                            const deleteIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                            deleteIcon.setAttribute("xmlns", "http://www.w3.org/2000/svg");
                            deleteIcon.setAttribute("fill", "none");
                            deleteIcon.setAttribute("viewBox", "0 0 24 24");
                            deleteIcon.setAttribute("stroke-width", "1.5");
                            deleteIcon.setAttribute("stroke", "white");
                            deleteIcon.classList.add("w-6", "h-6", "delete-icon");
                            deleteIcon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />`;

                            deleteIcon.addEventListener("click", function () {
                                imagePreviewsContainer.removeChild(imgContainer);
                            });

                            imgContainer.appendChild(img);
                            imgContainer.appendChild(deleteIcon);
                            imagePreviewsContainer.appendChild(imgContainer);
                        };

                        reader.readAsDataURL(file);
                    }
                }
                function openEnlargedImg(imgSrc) {
                    const modal = document.getElementById('defaultModal');
                    const enlargedImg = document.getElementById('enlargedImg');

                    enlargedImg.src = imgSrc;
                    modal.classList.remove('hidden');
                }
            </script>


            <!-- Main modal -->
            <div id="defaultModal" tabindex="-1" aria-hidden="true"
                class="fixed top-0 left-0 right-0 z-50 hidden p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
                <div class="relative w-full max-w-2xl max-h-full">
                    <!-- Modal content -->
                    <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                        <!-- Modal header -->
                        <div class="flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600">
                            <button type="button"
                                class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                                data-modal-hide="defaultModal">
                                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                                    viewBox="0 0 14 14">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                                </svg>
                                <span class="sr-only">Close modal</span>
                            </button>
                        </div>
                        <!-- Modal content -->
                        <div class="p-6 space-y-6">
                            <img id="enlargedImg" src="" alt="Enlarged Image" class="max-w-full h-auto">
                        </div>
                    </div>
                </div>
            </div>


            <style>
                .image-container {
                    position: relative;
                }

                .delete-icon {
                    position: absolute;
                    top: 8px;
                    right: 8px;
                    cursor: pointer;
                    background-color: rgba(0, 0, 0, 0.5);
                    border-radius: 50%;
                }
            </style>





            <div th:if="${step eq 6}"
                class="h-full mb-4 flex flex-col items-center border rounded-md dark:border-gray-700">
                <th:block th:insert="~{fragments/progress-bar :: progress-bar}"></th:block>
                <h2 class="text-xl font-bold text-gray-700 mb-8 mt-4">Detalji oglasa</h2>
                <form th:action="@{/oglas-6}" method="post">
                    <div class="flex flex-col mb-4">
                        <label for="description">Opis oglasa</label>
                        <textarea id="description" name="description" rows="4" required
                            class="input w-96 h-64 resize-none" th:value="${session['description']}"></textarea>
                    </div>
                    <div class="relative flex flex-col mb-4">
                        <label for="price">Cijena</label>
                        <div class="flex items-center">
                            <input type="text" id="price" name="price" class="input w-96" required
                                pattern="[0-9]*\.?[0-9]+" placeholder="1000.00" oninput="validateInput(this)"
                                th:value="${session['price']}">
                            <span class="absolute right-0 pr-2 text-gray-500 text-xl">&euro;</span>
                        </div>
                    </div>
                    <div class="flex justify-between mb-4">
                        <div class="mt-2">
                            <div th:if="${step > 1}">
                                <a th:href="@{/back(step=${step - 1})}" class="button ">Nazad</a>
                            </div>
                        </div>
                        <div>
                            <input type="submit" value="Potvrdi" class="button">
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <th:block th:insert="~{fragments/sideDiv :: sideDiv}"></th:block>

    </main>

    <footer>
        <th:block th:insert="~{fragments/footer :: footer}"></th:block>
    </footer>

</body>

</html>