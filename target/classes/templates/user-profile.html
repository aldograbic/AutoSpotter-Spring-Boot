<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <th:block th:insert="~{fragments/head-dynamic :: head-dynamic}"></th:block>
    <title th:text="'AutoSpotter | ' + ${user.username}"></title>
</head>
<body class="flex flex-col min-h-screen">
    
    <th:block th:insert="~{fragments/header-dynamic :: header-dynamic}"></th:block>

    <main class="flex flex-1 space-x-4">

        <th:block th:insert="~{fragments/sideDiv :: sideDiv}"></th:block>

        <div class="flex flex-col flex-1 w-1/2 overflow-x-hidden">
            <h1 class="text-3xl font-bold text-gray-700 mb-8 mt-8">Korisnički račun</h1>

            <div class="h-full mb-4 flex flex-col items-center border rounded-md">
                <div class="w-48 h-48 bg-cyan-100 mx-auto mt-8 rounded-full shadow-2xl inset-x-0 top-0 flex items-center justify-center text-cyan-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                </div>

                <div class="mt-8 text-center">
                    <h1 class="text-4xl font-medium text-gray-700" th:text="${user.username}"></h1>
                    <p class="mt-2 text-gray-500" th:text="${user.firstName + ' ' + user.lastName}"></p>
                    <p class="font-light text-gray-600 mt-2" th:text="${user.city.cityName + ', ' + user.county}"></p>
                    
                    <p class="mt-8 text-gray-500">Broj telefona: <span th:text="${user.phoneNumber}"></span></p>
                    <p class="mt-2 text-gray-500">E-mail adresa: <span th:text="${user.email}"></span></p>
                </div>

                <div class="text-center">
                    <h2 class="text-xl font-bold text-gray-700 mb-6 mt-8 ml-4">Oglasi korisnika <span th:text="${'(' + listingCount + ')'}"></span></h2>

                    <div class="mt-8 flex overflow-x-auto" style="min-width: 120rem;">
                        <div th:if="${#lists.isEmpty(userListing)}">
                            <p class="text-gray-500">Korisnik nema oglasa.</p>
                        </div>

                        <div class="border rounded-t-md flex flex-col"  th:each="listing : ${userListing}">
                            <div class="aspect-w-3 aspect-h-2">
                                <a th:href="@{'/oglasi/' + ${listing.id}}"><img class="object-cover aspect-square w-full" th:src="@{/img/car-example.jpg}" alt="Slika vozila"></a>
                            </div>

                            <div>
                                <a th:href="@{'/oglasi/' + ${listing.id}}" class="text-cyan-700 hover:text-cyan-900">
                                    <h2 class="inline-block font-semibold" th:text="${listing.vehicle.manufacturer + ' ' + listing.vehicle.model + ' (' + listing.vehicle.year + ')'}"></h2>
                                </a>
                                <p th:text="&euro; + ${listing.listingPrice == listing.listingPrice.intValue() ? listing.listingPrice.intValue() : listing.listingPrice}" class="text-gray-700 font-semibold"></p>
                            </div>

                            <div class="grid grid-cols-2">
                                
                                <div class="flex items-center mr-2">
                                    <div class="w-8 h-8 flex-shrink-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><g fill="currentColor">
                                            <path d="M3 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5Z"/>
                                            <path d="M1 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8a2 2 0 0 1 2 2v.5a.5.5 0 0 0 1 0V8h-.5a.5.5 0 0 1-.5-.5V4.375a.5.5 0 0 1 .5-.5h1.495c-.011-.476-.053-.894-.201-1.222a.97.97 0 0 0-.394-.458c-.184-.11-.464-.195-.9-.195a.5.5 0 0 1 0-1c.564 0 1.034.11 1.412.336c.383.228.634.551.794.907c.295.655.294 1.465.294 2.081v3.175a.5.5 0 0 1-.5.501H15v4.5a1.5 1.5 0 0 1-3 0V12a1 1 0 0 0-1-1v4h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V2Zm9 0a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v13h8V2Z"/></g>
                                        </svg>
                                    </div>
                                    <div class="ml-2">
                                        <p class="font-medium" th:text="${listing.vehicle.engineType}"></p>
                                    </div>
                                </div>

                                <div class="flex items-center">
                                    <div class="w-8 h-8 flex-shrink-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                                            <path fill="currentColor" d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m0 2v12h7V6H4m16 12V6h-1.24c.24.54.19 1.07.19 1.13c-.07.67-.54 1.37-.71 1.62l-2.33 2.55l3.32-.02l.01 1.22l-5.2-.03l-.04-1s3.05-3.23 3.2-3.52c.14-.28.71-1.95-.7-1.95c-1.23.05-1.09 1.3-1.09 1.3l-1.54.01s.01-.66.38-1.31H13v12h2.58l-.01-.86l.97-.01s.91-.16.92-1.05c.04-1-.81-1-.96-1c-.13 0-1.07.05-1.07.87h-1.52s.04-2.06 2.59-2.06c2.6 0 2.46 2.02 2.46 2.02s.04 1.25-1.11 1.72l.52.37H20M8.92 16h-1.5v-5.8l-1.8.56V9.53l3.14-1.12h.16V16Z"/>
                                        </svg>
                                    </div>
                                    <div class="ml-2">
                                        <p class="font-medium" th:text="${listing.vehicle.mileage + ' km'}"></p>
                                    </div>
                                </div>
              
                                <div class="flex items-center">
                                    <div class="w-8 h-8 flex-shrink-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                                            <path fill="currentColor" d="M9.5 6c-1.32 0-2.496.86-2.875 2.125L5.25 12.719l-1.938-.656l-.624 1.874l1.968.657l-.625 2.125A.972.972 0 0 0 4 17v8c0 .55.45 1 1 1h3l.656-2h5.25l9.938 1.531L24 26h3.031c.242 0 .477-.09.657-.25l.03-.031c.012-.012.024-.02.032-.032a.998.998 0 0 0 .25-.625v-.093a.668.668 0 0 0 0-.125L27.156 19H29v-2h-2.375L24.5 12.656l.875-2.937a1.004 1.004 0 0 0-.344-1.094l-1.937-1.438a1.017 1.017 0 0 0-.5-.187L9.562 6H9.5zm0 2l12.625.969l1.125.844l-.781 2.624a.999.999 0 0 0 .062.75l1.5 3.063l-6.125-2.125l-.125-.063h-.125L7.22 13.095l1.31-4.376c.13-.43.524-.719.969-.719zm-2.875 7.063l10.781 1h.063l7.625 2.687l.718 5.031L14.22 22a1.043 1.043 0 0 0-.156 0h-1.157l.438-1l4.312.625L20.25 22L19 20l-7-1l-1.25 3H6v-4.813zM8.5 16a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3zm12.375 2.75a1.808 1.808 0 1 0 3.406 1.219z"/>
                                        </svg>
                                    </div>
                                    <div class="ml-2">
                                        <p class="font-medium" th:text="${listing.vehicle.state}"></p>
                                    </div>
                                </div>

                                <div class="flex items-center">
                                    <div class="w-8 h-8">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 2048 2048">
                                            <path fill="currentColor" d="M2048 128v1792H0V128h384V0h128v128h1024V0h128v128h384zM128 256v256h1792V256h-256v128h-128V256H512v128H384V256H128zm1792 1536V640H128v1152h1792zm-512-896v640h-128v-486q-27 14-62 26t-66 12V960q12 0 31-6t39-15t36-21t22-21v-1h128zm-384 192q0 39-11 70t-31 58t-44 51t-51 46t-51 46t-47 49h235v128H640v-36q0-19-1-38t4-38t10-36q11-27 33-53t50-53t55-51t51-49t39-47t15-47q0-27-19-45t-45-19q-23 0-40 14t-23 37l-125-26q6-33 23-61t44-48t57-32t64-12q40 0 75 15t61 41t41 61t15 75z"/>
                                        </svg>
                                    </div>
                                    <div class="ml-2">
                                        <p class="font-medium" th:text="${listing.vehicle.year}"></p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <th:block th:insert="~{fragments/sideDiv :: sideDiv}"></th:block>

    </main>
</body>
</html>